<sequence id="af417c05-f1ed-420b-8577-bf9a1f119d6a">
	<map id="8955d11e-4a10-47d1-b19d-931ee9ea88e4">
		<invoke id="6d5defc0-d4b6-4a18-8971-258f42188fa6"
			resultName="result9414fd030de14921bb4ff4ba0716021d"
			serviceId="nabu.frameworks.io.crud.channel.services.get"
			x="30"
			y="30">
			<link id="bd1d4876-b523-407a-9ae8-dea4d9863142">
				<from>input/connectionId</from>
				<to>connectionId</to>
			</link>
			<link id="eb801106-6f19-482c-89ce-9c7faf83a753">
				<from>input/channelId</from>
				<to>id</to>
			</link>
		</invoke>
		<link id="ce5f704e-f29a-4f35-b4da-bcd7a9b8c609">
			<from>result9414fd030de14921bb4ff4ba0716021d/result</from>
			<to>channel</to>
		</link>
		<link id="f18a952a-cb81-4f12-a1aa-063b26890276"
			fixedValue="true">
			<from>true</from>
			<to>looping</to>
		</link>
		<link id="476d6eeb-b842-4590-9d84-5b21fa4a9523"
			fixedValue="true">
			<from>0</from>
			<to>offset</to>
		</link>
	</map>
	<throw id="1334d743-d400-4a57-9837-8cc9d35a12ef"
		code="CHANNEL-NOT-FOUND"
		label="!channel"
		message="Channel not found"/>
	<map id="d3ee5a43a78c4941a67e66e7a3b8500a"
		label="input/limit == null">
		<link id="fee65b8438fb4c04afb90a3d9f068ed7">
			<from>channel/defaultLimit</from>
			<to>input/limit</to>
		</link>
	</map>
	<throw id="34ebd988-2cb6-46ea-bdfc-ecaeb5204556"
		code="CHANNEL-NO-PROVIDER"
		label="channel/channelProviderId == null"
		message="Channel does not have a configured provider"/>
	<map id="2aa85fe1-14e1-45b4-9cf7-f74d7d0c8402">
		<invoke id="0ba2abeb-1628-4ca9-99ff-11aba76b5cf0"
			resultName="result3707b2a71dd64635b222da8b89453308"
			serviceId="nabu.frameworks.io.crud.channelProvider.services.get"
			x="106"
			y="69">
			<link id="5ba71f93-9936-4f99-9980-00b022cc08f4">
				<from>channel/channelProviderId</from>
				<to>id</to>
			</link>
			<link id="c3074c8b-7833-4fb2-a8c5-c6bf614574f9">
				<from>input/connectionId</from>
				<to>connectionId</to>
			</link>
		</invoke>
		<link id="6ee2e3b3-9d61-4814-8c97-43a69a95e34a">
			<from>result3707b2a71dd64635b222da8b89453308/result</from>
			<to>channelProvider</to>
		</link>
		<invoke id="a3b2b4ae-5aa1-4419-83f9-66e523d7f80f"
			resultName="resultc329f67a7a404d2983fd04d2550d1567"
			serviceId="nabu.utils.Server.getServerName"
			x="128"
			y="192">
		</invoke>
		<link id="cad92243-1912-4f76-9ead-5052a9258758">
			<from>resultc329f67a7a404d2983fd04d2550d1567/server</from>
			<to>serverName</to>
		</link>
	</map>
	<map id="c3bba8c5-71da-42e0-9845-58fe1406e6ee">
		<invoke id="e90cd74b-3896-4269-8a1f-1429ec88f17a"
			resultName="resultada5b3e70271411bbeda53ef17ad95fd"
			serviceId="nabu.frameworks.io.utils.getServiceProperties"
			x="91"
			y="51">
			<link id="0a166f06-772e-44f9-8785-9262d80ad4ab">
				<from>channel/properties</from>
				<to>properties</to>
			</link>
			<link id="ac737b83-d969-49b1-8a19-d3e2ad4da9dd">
				<from>channelProvider/transferServiceId</from>
				<to>serviceId</to>
			</link>
		</invoke>
		<link id="28d1ab26-9a52-4e51-b201-6b231c42ff02">
			<from>resultada5b3e70271411bbeda53ef17ad95fd/properties</from>
			<to>propertiesInput</to>
		</link>
		<invoke id="f8a5802a-b545-45fc-8d03-72ecc7dc4a95"
			resultName="result389a7bc4096f48adb157815c64834b02"
			serviceId="nabu.utils.Server.uuid"
			x="125"
			y="261">
		</invoke>
		<link id="9058bea8-cd5a-4138-a1b2-2ea307600761">
			<from>result389a7bc4096f48adb157815c64834b02/uuid</from>
			<to>batchId</to>
		</link>
		<link id="b97a519e-0b10-4296-ae9a-940144f94e92">
			<from>resultada5b3e70271411bbeda53ef17ad95fd/marshalledProperties</from>
			<to>channelProperties</to>
		</link>
	</map>
	<map id="45d94f0f-1489-4df8-b17c-8c5197896c42"
		comment="Get the transformers for the channel">
		<invoke id="28235ce6-c08c-415d-a5a2-95bac000ede0"
			resultName="result5d284c455fb94dd6a851c5b59b41e97f"
			serviceId="nabu.frameworks.io.crud.channelTransformer.services.list"
			x="103"
			y="54">
			<link id="08c63b1e-0f76-40a2-9857-3199159d95d4"
				fixedValue="true">
				<from>priority</from>
				<to>orderBy[0]</to>
			</link>
			<link id="9d97e904-d457-4c53-94c6-44dbf22d008b">
				<from>channel/id</from>
				<to>filter/channelId[0]</to>
			</link>
			<link id="9effb370-c22d-4ad5-b02f-ae2a354957b6">
				<from>input/connectionId</from>
				<to>connectionId</to>
			</link>
		</invoke>
		<invoke id="74b510cd-d3d3-4588-a147-fbfece706e42"
			invocationOrder="1"
			resultName="result67b07fbf332742ebb00eff52323bf850"
			serviceId="nabu.utils.List.size"
			x="228"
			y="288">
			<link id="b135ddfb-16c9-43e3-b33e-2927656e0c17">
				<from>result5d284c455fb94dd6a851c5b59b41e97f/results</from>
				<to>list</to>
			</link>
		</invoke>
		<link id="3924aea4-aaad-4540-b2d6-b64b9030872d">
			<from>result67b07fbf332742ebb00eff52323bf850/size</from>
			<to>amountOfTransformers</to>
		</link>
		<link id="ce2908d3-2998-4cbf-bcd0-f9be23da1ff0">
			<from>result5d284c455fb94dd6a851c5b59b41e97f/results</from>
			<to>transformers</to>
		</link>
	</map>
	<map id="e9f29ac7-6520-4fe0-98fa-f67341d392e0"
		comment="Fill in the default queue"
		label="channel/queue == null">
		<link id="7de83322-2dc0-4a79-8f70-3e9af57a36d2"
			fixedValue="true">
			<from>io</from>
			<to>channel/queue</to>
		</link>
	</map>
	<for id="4c1a31f3-e718-4e9b-98c6-1b8f61646cd5"
		comment="Repeat depending on the limit / limited settings">
		<map id="62dfc1c1904e477ea098e9b6a003d096"
			comment="Drop channel instance">
			<drop id="1a622c6a1aba4fb0bd13178f32e8f391"
				path="channelInstance"/>
		</map>
		<sequence id="5144b795-6430-401c-b6ad-ef139f7dea2c"
			comment="Transfer, commit everything if this is successful"
			scopeDefaultTransaction="true">
			<map id="99391d9e-be5d-45ce-b313-95aa24cef1ca"
				comment="Map new channel instance">
				<invoke id="d40b2deb-9235-459d-b9f8-03ae9adf7257"
					resultName="resultdfa35abb50f6498bb87e929304849f8f"
					serviceId="nabu.utils.Server.uuid"
					x="221"
					y="195">
				</invoke>
				<link id="116f879b-e1ae-43c2-9263-e606694ac190">
					<from>resultdfa35abb50f6498bb87e929304849f8f/uuid</from>
					<to>channelInstance/id</to>
				</link>
				<link id="ea88826d-ccd2-48c5-bd39-8c72e9241e4c">
					<from>channel/id</from>
					<to>channelInstance/channelId</to>
				</link>
				<invoke id="b2ed4359-d58b-41ad-890a-d80ec32993ae"
					resultName="result6cf648bec7a64d5e814826fac55b4f68"
					serviceId="nabu.utils.Date.now"
					x="146"
					y="315">
				</invoke>
				<link id="8acd0464-4a56-4fc9-a81c-c34b6b95d5dc">
					<from>result6cf648bec7a64d5e814826fac55b4f68/date</from>
					<to>channelInstance/started</to>
				</link>
				<link id="4661f4aa-975d-4a18-a6e1-63b69fb90652">
					<from>batchId</from>
					<to>channelInstance/batchId</to>
				</link>
				<link id="b849c04e-9e6b-4390-afad-22201603ee7d">
					<from>serverName</from>
					<to>channelInstance/serverId</to>
				</link>
				<link id="b2451583-1566-4118-8b4f-41c3757f5c5b"
					fixedValue="true">
					<from>false</from>
					<to>channelInstance/done</to>
				</link>
				<link id="ab2a9962-850e-4f03-a813-91949a983dea">
					<from>channelProperties</from>
					<to>channelInstance/properties</to>
				</link>
				<link id="e503320c-592b-4ce4-9c27-f27166adf1e9">
					<from>input/limit</from>
					<to>channelInstance/resultLimit</to>
				</link>
				<link id="4c088f0f-1725-4bed-b0e7-8825236ed2aa">
					<from>offset</from>
					<to>channelInstance/resultOffset</to>
				</link>
			</map>
			<map id="894b4331-8aac-4360-86fa-54eac2c82da7"
				comment="Insert it immediately for foreign key purposes">
				<invoke id="4d0d9ff7-0b7f-403a-933b-62c017f4a481"
					resultName="resulted91b5f1f0de44f59e465dd13ec44a7b"
					serviceId="nabu.services.jdbc.Services.insert"
					x="120"
					y="63">
					<link id="b681d9f6-e2fa-46ba-9d93-eab97a0377c9">
						<from>input/connectionId</from>
						<to>connection</to>
					</link>
					<link id="b801a8bc-e9ea-4495-a072-98da8d1d1a09">
						<from>channelInstance</from>
						<to>instances[0]</to>
					</link>
				</invoke>
			</map>
			<map id="6e057ed0-e6be-45b3-87cf-b16dc39b5765"
				comment="Get the data">
				<invoke id="a466761d-6b5e-4d8c-99fb-dd596bd58bb2"
					resultName="resultb761193db07e4f30be24c24741b00d90"
					serviceId="nabu.frameworks.io.specs.transferIn"
					x="55"
					y="51">
					<link id="50dd8eca-c69c-4c4b-b496-d5ab2a2eba68">
						<from>propertiesInput</from>
						<to>properties</to>
					</link>
					<link id="b0655c14-f124-45a1-a77d-fb6cbe6244e6">
						<from>input/limit</from>
						<to>limit</to>
					</link>
					<link id="a29c6bd9-1126-4985-89b8-3d395429d1c1">
						<from>channelProvider/transferServiceId</from>
						<to>implementationId</to>
					</link>
					<link id="719da102-47b4-45a5-aaa4-2220a6327e59"
						fixedValue="true">
						<from>true</from>
						<to>useAsContext</to>
					</link>
					<link id="d97222f9-ab1f-44a5-b007-22180a194341">
						<from>offset</from>
						<to>offset</to>
					</link>
				</invoke>
				<link id="006805d9-c607-44d1-9084-b1e38b95d0fc">
					<from>resultb761193db07e4f30be24c24741b00d90/limited</from>
					<to>limited</to>
				</link>
				<link id="c4fb8849-8d0a-4aaf-9524-d8f88c1dbbae">
					<from>resultb761193db07e4f30be24c24741b00d90/results</from>
					<to>transferResults</to>
				</link>
			</map>
			<for id="7408be5b-0cd6-4e70-b04f-a5abe5ad8928"
				comment="We always store the raw transfer results, even if there are transformers involved"
				index="transferIndex"
				into="transferRecords"
				variable="transferResult">
				<map id="ed625301-ee1c-4611-8e93-2ea96cdc6985"
					comment="Map main">
					<invoke id="d3de86bb-0bcd-4115-9cb5-33d8192c2d1d"
						invocationOrder="1"
						resultName="result223cf6bb0e884cedad723b7798bce1f8"
						serviceId="nabu.frameworks.datastore.Services.properties"
						x="270"
						y="64">
						<link id="80170d4d-c69e-41e4-82f6-77b0f533279a">
							<from>result437c3bb237a44cdb8bbb84d277ab0477/value</from>
							<to>uri</to>
						</link>
					</invoke>
					<link id="f5678de9-843e-4366-9e5e-5b625a8df1d4">
						<from>result223cf6bb0e884cedad723b7798bce1f8/properties/contentType</from>
						<to>transferRecords[0]/contentType</to>
					</link>
					<link id="b2ea348c-1f82-413c-a37c-deb2dcc9ce41">
						<from>result223cf6bb0e884cedad723b7798bce1f8/properties/name</from>
						<to>transferRecords[0]/contentName</to>
					</link>
					<link id="eb8d91e0-eb93-4aa8-811b-bc75bec7c7ca">
						<from>result223cf6bb0e884cedad723b7798bce1f8/properties/size</from>
						<to>transferRecords[0]/contentSize</to>
					</link>
					<invoke id="b74eaf97-1629-4bb8-9ce6-d8f0e5ed4c36"
						resultName="result7a5c7263e4144f569acc347d81414d42"
						serviceId="nabu.utils.Server.uuid"
						x="29"
						y="204">
					</invoke>
					<link id="379b4d40-7778-4820-8d78-7073d849a278">
						<from>result7a5c7263e4144f569acc347d81414d42/uuid</from>
						<to>transferRecords[0]/id</to>
					</link>
					<invoke id="dad9f833-cec3-4c28-9643-ce1dfc829f00"
						resultName="result0fb5b09271164d1d95ac4e348add1f5f"
						serviceId="nabu.frameworks.io.utils.getResultProperties"
						x="125"
						y="312">
						<link id="ad960413-cd09-4446-b7a1-694de57de2b7">
							<from>transferResult</from>
							<to>result</to>
						</link>
					</invoke>
					<link id="132e8adf-00db-4840-92fc-d2250ea28ca4">
						<from>result0fb5b09271164d1d95ac4e348add1f5f/properties</from>
						<to>transferRecords[0]/properties</to>
					</link>
					<link id="ffa0f097-e091-4c01-8573-61d9aaa8f644"
						fixedValue="true">
						<from>0</from>
						<to>transferRecords[0]/depth</to>
					</link>
					<link id="2d3a937f-e092-461f-a7a3-62349fcebae8">
						<from>channelInstance/id</from>
						<to>transferRecords[0]/channelInstanceId</to>
					</link>
					<link id="fca3cdaa-a7fc-4810-8272-c113f49f1da5"
						fixedValue="true">
						<from>=amountOfTransformers == 0</from>
						<to>transferRecords[0]/final</to>
					</link>
					<invoke id="2aa884c3-935f-4ab0-b2bb-771d26e038f3"
						resultName="result437c3bb237a44cdb8bbb84d277ab0477"
						serviceId="nabu.utils.reflection.Type.get"
						x="93"
						y="406">
						<link id="5da7e299-121b-4273-b375-e0d18a1c8a76">
							<from>transferResult</from>
							<to>typeInstance</to>
						</link>
						<link id="28e40775-dd48-45b8-a101-ef6786b9f170"
							fixedValue="true">
							<from>uri</from>
							<to>path</to>
						</link>
					</invoke>
					<link id="338b4508-8e1c-4bb3-a9b8-e169cbcafc59">
						<from>result437c3bb237a44cdb8bbb84d277ab0477/value</from>
						<to>transferRecords[0]/uri</to>
					</link>
				</map>
				<query>transferResults</query>
			</for>
			<map id="9677402b-9b75-4112-a3d5-de4a62608413"
				comment="Insert the raw records"
				label="transferRecords">
				<invoke id="36a0002a-3748-445e-bd5c-1aa8f7492da7"
					resultName="resultf39379bb143e48b88ae6ccc039ca2231"
					serviceId="nabu.services.jdbc.Services.insert"
					x="84"
					y="22">
					<link id="04f031d1-1768-439c-ad66-29854835ddcf">
						<from>input/connectionId</from>
						<to>connection</to>
					</link>
					<link id="379fdbf9-960a-42ed-a8b6-a7eefe97e81b">
						<from>transferRecords</from>
						<to>instances</to>
					</link>
				</invoke>
			</map>
			<map id="8082449d-1261-4521-8357-2aa2ee599d57"
				comment="Transform the records">
				<invoke id="62ff19bf-0cec-47e3-923d-03701b2baae1"
					resultName="result282a3d41b3d64546846edea2bae1bd8b"
					serviceId="nabu.frameworks.io.utils.transform"
					x="187"
					y="101">
					<link id="7dae8e96-2430-4201-9051-9eea78d0981c">
						<from>transferRecords</from>
						<to>records</to>
					</link>
					<link id="5c7d8cdd-f8c2-4097-9ebb-d10ab9851f9f">
						<from>input/connectionId</from>
						<to>connectionId</to>
					</link>
					<link id="7f486d21-2b73-4733-a670-64796d7d09d3">
						<from>transformers</from>
						<to>transformers</to>
					</link>
					<link id="b8ecddb0-7c84-4cd0-b470-ac9250b2090e">
						<from>channelInstance/id</from>
						<to>channelInstanceId</to>
					</link>
				</invoke>
				<link id="5a6eeb43-cefb-4974-8321-d7a9b84a902b">
					<from>result282a3d41b3d64546846edea2bae1bd8b/transformed</from>
					<to>recordsToProcess</to>
				</link>
			</map>
			<sequence id="0d8962fb-8423-4d2a-baa5-84a81c00d53e"
				label="amountOfTransformers &gt; 0">
				<map id="aa5b8cf0-97b1-4f1a-a3c9-3ddbcdf308bd"
					comment="Set the transformed timestamp">
					<invoke id="d0cf918c-a82a-4a21-bf54-921f2229d686"
						resultName="result7b40ee489d7d4ee7a099b9be9d47d74d"
						serviceId="nabu.utils.Date.now"
						x="152"
						y="192">
					</invoke>
					<link id="d75f8d74-b375-4a98-984f-be2c884067dd">
						<from>result7b40ee489d7d4ee7a099b9be9d47d74d/date</from>
						<to>channelInstance/transformed</to>
					</link>
				</map>
				<map id="ec6223cf-a4fa-4e2f-8e21-561e3bb6da80">
					<invoke id="f3d66e30-ccfc-41a0-b669-15958cef8657"
						resultName="result63c7657d31334eaca5f0b3d581d00efd"
						serviceId="nabu.services.jdbc.Services.update"
						x="104"
						y="57">
						<link id="32c7226b-e177-4ac3-aefb-6db6ba8ebbaf">
							<from>input/connectionId</from>
							<to>connection</to>
						</link>
						<link id="256b6f7b-cdb7-4730-99ef-b1320bfeecd3">
							<from>channelInstance</from>
							<to>instances[0]</to>
						</link>
					</invoke>
				</map>
			</sequence>
		</sequence>
		<sequence id="d928abcc-1b4b-4936-9e0a-29a58c7608bc"
			comment="If we have a finalization service, run it"
			label="channelProvider/finalizationServiceId != null"
			scopeDefaultTransaction="true">
			<map id="a10449f6-6663-4061-9f48-e311a45530a8">
				<invoke id="73f62408-a383-4191-8f28-48e8e7531fb3"
					resultName="resulta668001323e0456ea2023973c816190d"
					serviceId="nabu.frameworks.io.utils.finalize"
					x="80"
					y="73">
					<link id="cc2bba28-df05-430e-b893-85f21d8a06d4">
						<from>transferRecords</from>
						<to>records</to>
					</link>
					<link id="e6dd2ee7-4e89-46dc-b9fb-2dd912ed58ab">
						<from>channelProvider/finalizationServiceId</from>
						<to>finalizeServiceId</to>
					</link>
					<link id="0a9db199-f54f-445c-82a7-60f5ea5a5e1b">
						<from>channelInstance/id</from>
						<to>channelInstanceId</to>
					</link>
					<link id="b621084a-91f8-4da7-b867-9485c6c710e6">
						<from>channelInstance/properties</from>
						<to>channelProperties</to>
					</link>
				</invoke>
			</map>
			<map id="5ba00304c35043189db3ded8aed37ee6"
				comment="Set the finalized timestamp">
				<invoke id="023faf9a92c44db4ae666e3a9a4ab72b"
					resultName="result7b40ee489d7d4ee7a099b9be9d47d74d"
					serviceId="nabu.utils.Date.now"
					x="152"
					y="192">
				</invoke>
				<link id="12bbf80e-2278-4305-9b18-f773cc9717b9">
					<from>result7b40ee489d7d4ee7a099b9be9d47d74d/date</from>
					<to>channelInstance/finalized</to>
				</link>
			</map>
			<map id="2ee226d7605041d89fc980245206393d">
				<invoke id="a1557d6938ec40809bbb9a5394bfdea9"
					resultName="result63c7657d31334eaca5f0b3d581d00efd"
					serviceId="nabu.services.jdbc.Services.update"
					x="104"
					y="57">
					<link id="73b0dcfa64c649609c6d36d91061d36e">
						<from>input/connectionId</from>
						<to>connection</to>
					</link>
					<link id="5f6dd9089e534953b52187e5faec4665">
						<from>channelInstance</from>
						<to>instances[0]</to>
					</link>
				</invoke>
			</map>
		</sequence>
		<switch id="d90ddad1-1886-4c0e-a847-434063c918ea">
			<sequence id="26c558a9-e949-403a-bb9a-a6dc23731f3a"
				comment="If we have a handler, process it"
				label="channel/handlerId != null"
				scopeDefaultTransaction="true">
				<map id="61991890-d441-4a6e-b1fb-b15687d92f99"
					label="recordsToProcess">
					<invoke id="5531badf-0f05-45ce-8d3f-d62aab6080b8"
						resultName="resultcdebb902758f4431929d5270beeffe36"
						serviceId="nabu.frameworks.io.specs.handle"
						target="nabu.frameworks.tasks.providers.executor"
						x="68"
						y="57">
						<link id="1702afaa-2b12-43af-a593-8ea14f7fbea9">
							<from>recordsToProcess</from>
							<to>transfers</to>
						</link>
						<link id="4514d333-e4f3-49e9-a590-63b7c2c72d9c">
							<from>channel/handlerId</from>
							<to>implementationId</to>
						</link>
						<link id="b778425e-793e-4cbc-8c6d-22ad472b8a8f"
							fixedValue="true">
							<from>true</from>
							<to>useAsContext</to>
						</link>
						<link id="3e33d5deed77422d8ab7cd28f862c443">
							<from>input/connectionId</from>
							<to>connectionId</to>
						</link>
						<targetProperties
								collectionIndex="connectionId">=input/connectionId</targetProperties>
						<targetProperties
								collectionIndex="queue">=channel/queue</targetProperties>
						<targetProperties
								collectionIndex="groupId">=channelInstance/batchId</targetProperties>
						<targetProperties
								collectionIndex="contextId">=channelInstance/id</targetProperties>
					</invoke>
				</map>
				<map id="2ec3f74685ed4105b2ad124a1ee61501"
					comment="Set the processed timestamp">
					<invoke id="8ab23d18a1ad4146a27cad1e80dc132c"
						resultName="result7b40ee489d7d4ee7a099b9be9d47d74d"
						serviceId="nabu.utils.Date.now"
						x="152"
						y="192">
					</invoke>
					<link id="5c594340-bbd2-400f-8187-277e14cd565c">
						<from>result7b40ee489d7d4ee7a099b9be9d47d74d/date</from>
						<to>channelInstance/processed</to>
					</link>
					<link id="e19ac07e-4668-48a4-8839-dab0a88595fb"
						fixedValue="true">
						<from>true</from>
						<to>channelInstance/done</to>
					</link>
				</map>
				<map id="0717ced57edf47c28dbbfe983f822e79">
					<invoke id="a334fc3a0c974ed49f97dc10499b1366"
						resultName="result63c7657d31334eaca5f0b3d581d00efd"
						serviceId="nabu.services.jdbc.Services.update"
						x="104"
						y="57">
						<link id="b24e7bd881c44aa484460542c032cf3d">
							<from>input/connectionId</from>
							<to>connection</to>
						</link>
						<link id="35b89e26882a4ea7aec0d1cbc99a1f2a">
							<from>channelInstance</from>
							<to>instances[0]</to>
						</link>
					</invoke>
				</map>
			</sequence>
			<sequence id="a27d27dafb814ddab88938ffaa3cc27e"
				comment="Just set done"
				scopeDefaultTransaction="true">
				<map id="7b9169150f0546a29711b6979e791cf8"
					comment="Set done">
					<link id="d69aabe4ffb14d41957e94c3d4e2cabd"
						fixedValue="true">
						<from>true</from>
						<to>channelInstance/done</to>
					</link>
				</map>
				<map id="b790b98c17ff415e997b7c1609a2ba7e">
					<invoke id="aa4b384132a64b2fa6f90e633ac89c26"
						resultName="result63c7657d31334eaca5f0b3d581d00efd"
						serviceId="nabu.services.jdbc.Services.update"
						x="104"
						y="57">
						<link id="f63e8e8a71b94dc58bd0217ea148a2cb">
							<from>input/connectionId</from>
							<to>connection</to>
						</link>
						<link id="525fe9c64c75404ea5fe5f3a88bf2b28">
							<from>channelInstance</from>
							<to>instances[0]</to>
						</link>
					</invoke>
				</map>
			</sequence>
		</switch>
		<map id="ec60b531-023a-49ad-a518-57e78c9f7bf4"
			comment="We update the offset"
			label="input/limit != null">
			<link id="d83a8959-a50f-4ff8-9303-40c3d377b127"
				fixedValue="true">
				<from>= offset + input/limit</from>
				<to>offset</to>
			</link>
			<drop id="43628517b7d24a6ea9b9321b5db3fa21"
				path="transferRecords"/>
		</map>
		<break id="4afcd6dc-380d-411a-b37d-35123578c87f"
			comment="If there is no limit configured or it was not adhered to, stop looping"
			label="input/limit == null || !limited">
			<count>1</count>
		</break>
		<query>looping</query>
	</for>
</sequence>